<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]--><!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]--><!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en> <!--<![endif]--> <head><meta charset=UTF-8><title>bind.hpp - boostjp</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css><!-- <link rel="stylesheet" href="/static/css/root.css"> --><script src=//code.jquery.com/jquery-2.1.1.min.js></script><script src=//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js></script><!-- <script src="//platform.twitter.com/widgets.js"></script> --><!-- <script src="/static/js/root.js"></script> --><!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]--><script>
            document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/,'js');
        </script><style type=text/css>
.tree{
  -webkit-border-radius:4px;
  -moz-border-radius:4px;
  border-radius:4px;
  -webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);
  -moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);
  box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);
  background-color:#fbfbfb;
  border:1px solid #999;
  margin-bottom:10px;
  /*max-height:300px;*/
  /*min-height:20px;*/
  overflow-x:scroll;
  padding:3px
}
.tree ul {
  padding-left:32px
}
.tree > ul{
  padding-left:0px
}
.tree a{
  display:inline;
  overflow:hidden;
  text-overflow:ellipsis;
  width:90%
}
.tree li{
  list-style-type:none;
  margin:0;
  padding:4px 0 0 2px;
  position:relative
}
.tree li::before,.tree li::after{
  content:'';
  left:-20px;
  position:absolute;
  right:auto
}
.tree li::before{
  border-left:1px solid #999;
  bottom:50px;
  height:100%;
  top:0;
  width:1px;
  -webkit-transition:"border-color 0.1s ease 0.1s";
  -moz-transition:"border-color 0.1s ease 0.1s";
  -o-transition:"border-color 0.1s ease 0.1s";
  transition:"border-color 0.1s ease 0.1s"
}
.tree li::after{
  border-top:1px solid #999;
  height:20px;
  top:13px;
  width:23px;
  -webkit-transition:"border-color 0.1s ease 0.1s";
  -moz-transition:"border-color 0.1s ease 0.1s";
  -o-transition:"border-color 0.1s ease 0.1s";
  transition:"border-color 0.1s ease 0.1s"
}
.tree li span{
  -moz-border-radius:5px;
  -webkit-border-radius:5px;
  border:1px solid #999;
  border-radius:5px;
  display:inline-block;
  line-height:14px;
  padding:2px 4px;
  text-decoration:none;
  -webkit-transition:color .2s ease .1s,background-color .2s ease .1s,border-color .3s ease .2s;
  -moz-transition:color .2s ease .1s,background-color .2s ease .1s,border-color .3s ease .2s;
  -o-transition:color .2s ease .1s,background-color .2s ease .1s,border-color .3s ease .2s;
  transition:color .2s ease .1s,background-color .2s ease .1s,border-color .3s ease .2s
}
.tree li.parent_li>span{cursor:pointer}
.tree li.parent_li>span:hover{
  background-color:#df8505;
  border:1px solid #c67605;
  color:#fff
}
.tree li.parent_li>span:hover+ul li::after{border-top-color:#f89406}
.tree li.parent_li>span:hover+ul li::before{border-left-color:#f89406}
.tree li.parent_li>span:hover+ul li span{
  background:#fddfb3;
  border:1px solid #faa937;
  color:#000
}
.tree li:last-child::before{height:30px}
.tree>ul>li::before,.tree>ul>li::after{border:0}
.google-search {
    width: 250px;
    margin-top: 2px;
}
.google-search-result .gsc-control-cse {
    padding: 0px;
    border: 0px;
}
/*
.google-search-result .gsc-adBlock {
    display:none !important;
    visibility:hidden !important;
}
.google-search-result .gsc-adBlockVertical {
    display:none !important;
    visibility:hidden !important;
}
*/
        </style><script>
function tree_onclick(e) {
    var children = $(this).parent('li.parent_li').find(' > ul > li');
    if (children.is(':visible')) {
        children.hide(100);
        $(this)
            .attr('title', 'Expand this branch')
            .find(' > i')
            .addClass('glyphicon-plus')
            .removeClass('glyphicon-minus');
    }
    else {
        children.show(100);
        $(this)
            .attr('title', 'Collapse this branch')
            .find(' > i')
            .addClass('glyphicon-minus')
            .removeClass('glyphicon-plus');
    }
    e.stopPropagation();
}
        </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56896607-2', 'auto');
  ga('send', 'pageview');

</script></head> <body> <header> <nav class="navbar navbar-default" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=/>boostjp : Boost日本語情報サイト</a> </div> <div class="collapse navbar-collapse" id=navbar-collapse> <div class="nav navbar-nav navbar-right google-search"> <script>
  (function() {
    var cx = '013316413321391058734:dma_peph4n0';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script> <gcse:searchbox></gcse:searchbox> </div> </div> </div> </nav> </header> <main id=main role=main> <div class=container-fluid> <div class=row> <div class=col-md-3> <div class=tree> <ul> <li> <a href=/communities.html>コミュニティ</a> </li> <li> <a href=/howtobuild.html>Boostライブラリのビルド方法</a> </li> <li> <a href=/index.html>boostjp</a> </li> <li> <a href=/mailing-lists.html>メーリングリスト</a> </li> <li> <a href=/the-team.html>運営メンバ</a> </li> <li> <a href=/used_project.html>Boostを使用しているプロジェクト</a> </li> <li class="parent_li active"> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-minus"></i></span> <a href=/archive.html>アーカイブ</a> <ul> <li class="parent_li active"> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-minus"></i></span> <a href=/archive/boost_docs.html>旧Boost日本語化プロジェクト</a> <ul> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> document <ul> <li style="display: none"> <a href=/archive/boost_docs/document/error_handling.html>エラーと例外のハンドリング</a> </li> <li style="display: none"> <a href=/archive/boost_docs/document/generic_exception_safety.html>ジェネリックコンポーネントにおける例外安全性</a> </li> <li style="display: none"> <a href=/archive/boost_docs/document/generic_programming.html>ジェネリックプログラミング手法</a> </li> </ul> </li> <li class="parent_li active"> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-minus"></i></span> <a href=/archive/boost_docs/libs.html>各ライブラリの翻訳ドキュメント</a> <ul> <li> <a href=/archive/boost_docs/libs/compatibility.html>Boost.Compatibilty ライブラリ</a> </li> <li> <a href=/archive/boost_docs/libs/mem_fn.html>mem_fn.hpp</a> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/archive/boost_docs/libs/array.html>Array wrapper library</a> <ul> <li style="display: none"> <a href=/archive/boost_docs/libs/array/array.html>arrayクラス, 固定サイズ配列のSTLコンテナ</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/array/array.hpp.html>array.hpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/array/array1.cpp.html>array1.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/array/array2.cpp.html>array2.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/array/array3.cpp.html>array3.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/array/array4.cpp.html>array4.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/array/array5.cpp.html>array5.cpp</a> </li> </ul> </li> <li class="parent_li active"> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-minus"></i></span> <a href=/archive/boost_docs/libs/bind.html>bind.hpp</a> <ul> <li> <a href=/archive/boost_docs/libs/bind/bind_as_compose.cpp.html>bind_as_compose.cpp</a> </li> <li> <a href=/archive/boost_docs/libs/bind/ref.html>ref.hpp</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/archive/boost_docs/libs/compose.html>非推奨： Compose library</a> <ul> <li style="display: none"> <a href=/archive/boost_docs/libs/compose/compose.html>Compose Function Object Adapters</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/compose/compose.hpp.html>boost/compose.hpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/compose/compose1.cpp.html>compose1.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/compose/compose2.cpp.html>compose2.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/compose/compose3.cpp.html>compose3.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/compose/compose4.cpp.html>compose4.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/compose/print.hpp.html>libs/compose/print.hpp</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/archive/boost_docs/libs/concept_check.html>The Boost Concept Check Library (BCCL)</a> <ul> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/bibliography.html>参考文献</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/concept_covering.html>コンセプトの充当化と原型</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/creating_concepts.html>コンセプト・チェック用クラスの作成</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/implementation.html>コンセプト・チェックの実装</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/prog_with_concepts.html>Programming with Concepts</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/reference.html>リファレンス</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/stl_concept_check.cpp.html>libs/concept_check/stl_concept_check.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/stl_concept_covering.cpp.html>libs/concept_check/stl_concept_covering.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/concept_check/using_concept_check.html>コンセプト・チェックの利用</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/archive/boost_docs/libs/conversion.html>Boost Conversion Library</a> <ul> <li style="display: none"> <a href=/archive/boost_docs/libs/conversion/cast.html>Header boost/cast.hpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/conversion/cast_test.cpp.html>libs/conversion/cast_test.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/conversion/lexical_cast.html>Header boost/lexical_cast.hpp</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/archive/boost_docs/libs/date_time.html>Boost Date-Time Library Documentation</a> <ul> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/class_date.html>gregorian::date</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/class_date_duration.html>gregorian::date_duration</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/class_date_period.html>gregorian::date_period</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/class_gregorian_calendar.html>gregorian::gregorian_calendar</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/class_ptime.html>posix_time::ptime Documentation</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/class_time_duration.html>posix_time::time_duration</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/date_algorithms.html>Date Generators / Algorithms</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/date_iterators.html>gregorian::date iterators</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/dates_as_strings.cpp.html>dates_as_strings.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/days_alive.cpp.html>days_alive.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/days_till_new_year.cpp.html>days_till_new_year.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/gregorian.html>Gregorian Date System Documentation</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/local_utc_conversion.cpp.html>local_utc_conversion.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/period_calc.cpp.html>period_calc.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/posix_time.html>Posix Time System Documentation</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/print_holidays.cpp.html>print_holidays.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/print_hours.cpp.html>print_hours.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/print_month.cpp.html>print_month.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/time_math.cpp.html>time_math.cpp</a> </li> <li style="display: none"> <a href=/archive/boost_docs/libs/date_time/time_periods.cpp.html>time_periods.cpp</a> </li> </ul> </li> </ul> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/archive/cpp_online_reading.html>C++オンライン読書会</a> <ul> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_001.html>第1回 C++Now! 読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_002.html>第2回 C++Now! 読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_003.html>第3回 C++Now! 読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_004.html>第4回 C++Now! 読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_005.html>第5回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_006.html>第6回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_007.html>第7回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_008.html>第8回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_009.html>第9回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_010.html>第10回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_011.html>第11回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_012.html>第12回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_013.html>第13回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_014.html>第14回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/archive_015.html>第15回 C++オンライン読書会</a> </li> <li style="display: none"> <a href=/archive/cpp_online_reading/request.html>読みたいC++資料リクエスト</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/archive/propose.html>提案予定プロジェクト</a> <ul> <li style="display: none"> <a href=/archive/propose/templ_rec_max.html>テンプレートの再帰上限数workaround(rejected)</a> </li> </ul> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/boostcon.html>BoostCon</a> <ul> <li style="display: none"> <a href=/boostcon/2010.html>BoostCon 2010</a> </li> <li style="display: none"> <a href=/boostcon/2011.html>BoostCon 2011</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/cppnow.html>C++Now!</a> <ul> <li style="display: none"> <a href=/cppnow/2012.html>C++Now! 2012</a> </li> <li style="display: none"> <a href=/cppnow/2013.html>C++Now! 2013</a> </li> <li style="display: none"> <a href=/cppnow/2014.html>C++Now! 2014</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/document.html>ドキュメント</a> <ul> <li style="display: none"> <a href=/document/boost-range-algorithm-kansu-no-susume.html>Boost.Range アルゴリズム関数のすすめ</a> </li> <li style="display: none" class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/document/boostserialization.html>Boost.Serialization</a> <ul> <li style="display: none"> <a href=/document/boostserialization/overview.html>Overview</a> </li> <li style="display: none" class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/document/boostserialization/other-classses.html>Other Classses</a> <ul> <li style="display: none"> <a href=/document/boostserialization/other-classses/extended_type_info.html>extended_type_info</a> </li> <li style="display: none"> <a href=/document/boostserialization/other-classses/singleton.html>singleton</a> </li> <li style="display: none"> <a href=/document/boostserialization/other-classses/void_cast.html>void_cast</a> </li> </ul> </li> <li style="display: none" class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/document/boostserialization/reference.html>Reference</a> <ul> <li style="display: none"> <a href=/document/boostserialization/reference/archive-concepts.html>Archive Concepts</a> </li> <li style="display: none" class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/document/boostserialization/reference/serializableconcept.html>SerializableConcept</a> <ul> <li style="display: none" class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/document/boostserialization/reference/serializableconcept/class-serialization-traits.html>Class Serialization Traits</a> <ul> <li style="display: none"> <a href=/document/boostserialization/reference/serializableconcept/class-serialization-traits/export-key.html>Export Key</a> </li> </ul> </li> </ul> </li> <li style="display: none" class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/document/boostserialization/reference/special-considerations.html>Special Considerations</a> <ul> <li style="display: none"> <a href=/document/boostserialization/reference/special-considerations/exporting-class-serialization.html>Exporting Class Serialization</a> </li> </ul> </li> </ul> </li> </ul> </li> <li style="display: none" class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/document/version.html>リリースノート</a> <ul> <li style="display: none"> <a href=/document/version/1_45_0.html>Boost 1.45.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_46_0.html>Boost 1.46.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_46_1.html>Boost 1.46.1リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_47_0.html>Boost 1.47.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_48_0.html>Boost 1.48.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_49_0.html>Boost 1.49.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_50_0.html>Boost 1.50.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_51_0.html>Boost 1.51.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_52_0.html>Boost 1.52.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_53_0.html>Boost 1.53.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_54_0.html>Boost 1.54.0リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_55_0.html>Boost 1.55.0 リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_56_0.html>Boost 1.56.0リリースノート</a> </li> <li style="display: none"> <a href=/document/version/1_57_0.html>Boost 1.57.0リリースノート</a> </li> </ul> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> editors_doc <ul> <li style="display: none"> <a href=/editors_doc/start_editing.html>boostjpを編集するには</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/study_meeting.html>Boost.勉強会</a> <ul> <li style="display: none"> <a href=/study_meeting/idea.html>ネタ帳</a> </li> <li style="display: none"> <a href=/study_meeting/reversed_index.html>ライブラリ逆引き</a> </li> <li style="display: none"> <a href=/study_meeting/study1.html>Boost.勉強会 #1</a> </li> <li style="display: none"> <a href=/study_meeting/study10.html>Boost.勉強会 #10 東京</a> </li> <li style="display: none"> <a href=/study_meeting/study11.html>Boost.勉強会 #11 東京</a> </li> <li style="display: none"> <a href=/study_meeting/study12.html>Boost.勉強会 #12 大阪</a> </li> <li style="display: none"> <a href=/study_meeting/study13.html>Boost.勉強会 #13 仙台</a> </li> <li style="display: none"> <a href=/study_meeting/study14.html>Boost.勉強会 #14 東京</a> </li> <li style="display: none"> <a href=/study_meeting/study15.html>Boost.勉強会 #15 札幌</a> </li> <li style="display: none"> <a href=/study_meeting/study16.html>Boost.勉強会 #16 大阪</a> </li> <li style="display: none"> <a href=/study_meeting/study2.html>Boost.勉強会 #2</a> </li> <li style="display: none"> <a href=/study_meeting/study3.html>Boost.勉強会 #3 関西</a> </li> <li style="display: none"> <a href=/study_meeting/study4.html>Boost.勉強会 #4</a> </li> <li style="display: none"> <a href=/study_meeting/study5.html>Boost.勉強会 #5 名古屋</a> </li> <li style="display: none"> <a href=/study_meeting/study6.html>Boost.勉強会 #6 札幌</a> </li> <li style="display: none"> <a href=/study_meeting/study7.html>Boost.勉強会 #7 東京</a> </li> <li style="display: none"> <a href=/study_meeting/study8.html>Boost.勉強会 #8 大阪</a> </li> <li style="display: none"> <a href=/study_meeting/study9.html>Boost.勉強会 #9 つくば</a> </li> <li style="display: none"> <a href=/study_meeting/year-end-party2010-nagoya.html>Boost.忘年会 2010@名古屋</a> </li> <li style="display: none"> <a href=/study_meeting/year-end-party2010-sapporo.html>Boost.忘年会 2010@sapporo</a> </li> <li style="display: none"> <a href=/study_meeting/year-end-party2010-tokyo.html>Boost.忘年会 2010@東京</a> </li> </ul> </li> <li class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/tips.html>Boost逆引きリファレンス</a> <ul> <li style="display: none"> <a href=/tips/array.html>配列</a> </li> <li style="display: none"> <a href=/tips/build.html>ビルドツール</a> </li> <li style="display: none"> <a href=/tips/build_link.html>ヘッダオンリー or ビルドが必要なライブラリ</a> </li> <li style="display: none"> <a href=/tips/circular_buffer.html>循環バッファ</a> </li> <li style="display: none"> <a href=/tips/config.html>コンパイラ間の差を吸収する</a> </li> <li style="display: none"> <a href=/tips/constcond_overload.html>コンパイル時条件によるオーバーロード</a> </li> <li style="display: none"> <a href=/tips/cxx11-boost-mapping.html>C++11とBoostの対応付け</a> </li> <li style="display: none"> <a href=/tips/date_time.html>日付の計算</a> </li> <li style="display: none"> <a href=/tips/dynamic_assert.html>実行時アサート</a> </li> <li style="display: none"> <a href=/tips/dynamic_bitset.html>サイズを動的に変更できるビット集合</a> </li> <li style="display: none"> <a href=/tips/dynamic_regex.html>動的な正規表現</a> </li> <li style="display: none"> <a href=/tips/dynamic_type.html>動的型</a> </li> <li style="display: none"> <a href=/tips/filesystem.html>ファイル／ディレクトリ操作</a> </li> <li style="display: none"> <a href=/tips/finite_state_machine.html>有限状態マシン</a> </li> <li style="display: none"> <a href=/tips/foreach.html>for each文</a> </li> <li style="display: none"> <a href=/tips/format.html>文字列フォーマット</a> </li> <li style="display: none"> <a href=/tips/function.html>関数ポインタと関数オブジェクトを統一的に扱う</a> </li> <li style="display: none"> <a href=/tips/geometry.html>計算幾何</a> </li> <li style="display: none"> <a href=/tips/graph.html>グラフ</a> </li> <li style="display: none"> <a href=/tips/hashmap.html>ハッシュ表</a> </li> <li style="display: none"> <a href=/tips/ini.html>iniファイルの読み込み／書き込み</a> </li> <li style="display: none"> <a href=/tips/initialize.html>組み込み型を必ず初期化する</a> </li> <li style="display: none"> <a href=/tips/interval_arithmetic.html>区間演算</a> </li> <li style="display: none"> <a href=/tips/io_state.html>ストリームの状態を戻す</a> </li> <li style="display: none"> <a href=/tips/iterator.html>イテレータを作る</a> </li> <li style="display: none"> <a href=/tips/json.html>JSONの読み込み／書き込み</a> </li> <li style="display: none"> <a href=/tips/lambda.html>無名関数</a> </li> <li style="display: none"> <a href=/tips/linear-algebra.html>線形代数</a> </li> <li style="display: none"> <a href=/tips/list.html>リスト処理の遅延評価</a> </li> <li style="display: none"> <a href=/tips/lockfree-queue.html>ロックフリーキュー</a> </li> <li style="display: none"> <a href=/tips/lockfree-stack.html>ロックフリースタック</a> </li> <li style="display: none"> <a href=/tips/logging.html>ロギング</a> </li> <li style="display: none"> <a href=/tips/math.html>数学</a> </li> <li style="display: none"> <a href=/tips/memory_mapped_file.html>メモリマップドファイル</a> </li> <li style="display: none"> <a href=/tips/move.html>ムーブ可能なクラスを定義する</a> </li> <li style="display: none"> <a href=/tips/mpi.html>MPI による並列計算</a> </li> <li style="display: none"> <a href=/tips/multi_array.html>多次元配列</a> </li> <li style="display: none"> <a href=/tips/multi_index.html>コンテナに複数の並び順を持たせる</a> </li> <li style="display: none"> <a href=/tips/multiprec-float.html>多倍長浮動小数点数</a> </li> <li style="display: none"> <a href=/tips/multiprec-int.html>多倍長整数</a> </li> <li style="display: none"> <a href=/tips/named_parameter.html>名前付き引数</a> </li> <li style="display: none"> <a href=/tips/noncopyable.html>クラスをコピー不可にする</a> </li> <li style="display: none"> <a href=/tips/noncopyable_container.html>コピー不可なオブジェクトを持ちまわる</a> </li> <li style="display: none"> <a href=/tips/operators.html>演算子を自動定義する</a> </li> <li style="display: none"> <a href=/tips/optional.html>無効値の統一的な表現</a> </li> <li style="display: none"> <a href=/tips/parser.html>構文解析</a> </li> <li style="display: none"> <a href=/tips/partial_eval.html>カリー化／部分適用</a> </li> <li style="display: none"> <a href=/tips/priority_sort.html>優先順位を付けて並べ替える</a> </li> <li style="display: none"> <a href=/tips/program_options.html>コマンドラインオプションの定義／取得</a> </li> <li style="display: none"> <a href=/tips/random.html>乱数</a> </li> <li style="display: none"> <a href=/tips/scope_guard.html>スコープを抜ける際に実行されるブロック</a> </li> <li style="display: none"> <a href=/tips/serialize.html>シリアライズ</a> </li> <li style="display: none"> <a href=/tips/signals.html>シグナル／スロット</a> </li> <li style="display: none"> <a href=/tips/smart_ptr.html>リソースを自動的に解放する</a> </li> <li style="display: none"> <a href=/tips/static_assert.html>コンパイル時アサート</a> </li> <li style="display: none"> <a href=/tips/static_regex.html>静的な正規表現</a> </li> <li style="display: none"> <a href=/tips/statistics.html>統計処理</a> </li> <li style="display: none"> <a href=/tips/string_algo.html>文字列操作</a> </li> <li style="display: none"> <a href=/tips/template_page.html>テンプレートページ</a> </li> <li style="display: none"> <a href=/tips/thread.html>スレッド</a> </li> <li style="display: none"> <a href=/tips/timer.html>処理時間の計測</a> </li> <li style="display: none"> <a href=/tips/tuple.html>タプル</a> </li> <li style="display: none"> <a href=/tips/type_traits.html>型特性</a> </li> <li style="display: none"> <a href=/tips/unit_test.html>単体テスト</a> </li> <li style="display: none"> <a href=/tips/uuid.html>オブジェクトにユニークなIDを付ける</a> </li> <li style="display: none"> <a href=/tips/variant.html>ユーザー定義型を扱える型安全な共用体</a> </li> <li style="display: none"> <a href=/tips/version.html>Boostのバージョンを調べる</a> </li> <li style="display: none"> <a href=/tips/xml.html>XMLの読み込み／書き込み</a> </li> <li style="display: none" class="parent_li "> <span onclick="tree_onclick.call(this, event)"><i class="glyphicon glyphicon-plus"></i></span> <a href=/tips/network.html>ネットワーク</a> <ul> <li style="display: none"> <a href=/tips/network/tcp.html>ネットワーク - TCP</a> </li> </ul> </li> </ul> </li> </ul> </div> </div> <div class=col-md-9> <div class="row google-search-result"> <gcse:searchresults></gcse:searchresults> </div> <div class=row> <ol class=breadcrumb> <li> <a href=/archive.html>アーカイブ</a> </li> <li> <a href=/archive/boost_docs.html>旧Boost日本語化プロジェクト</a> </li> <li> <a href=/archive/boost_docs/libs.html>各ライブラリの翻訳ドキュメント</a> </li> <li class=active> bind.hpp </li> </ol> </div> <div class=row> <h1>bind.hpp</h1> <ul> <li>翻訳元ドキュメント： <a href=http://www.boost.org/doc/libs/1_31_0/libs/bind/bind.html target=_blank>http://www.boost.org/doc/libs/1_31_0/libs/bind/bind.html</a></li> </ul> <h2>目次</h2> <ul> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#purpose>目的</a><ul> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-bind-with-function-and-function-pointer>関数と関数ポインタに対して<code><span style="color: #000">bind</span></code>を使用する</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-bind-with-function-object>関数オブジェクトに対して<code><span style="color: #000">bind</span></code>を使用する</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-bind-with-pointer-to-member>メンバへのポインタに対して<code><span style="color: #000">bind</span></code>を使用する</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-nested-binds-for-function-composition>関数合成のために入れ子の<code><span style="color: #000">bind</span></code>を使用する</a></li> </ul> </li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#examples>コード例</a><ul> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-bind-with-standard-algorithms>標準アルゴリズムに対して<code><span style="color: #000">bind</span></code>を使用する</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-bind-with-boost-function>Boost.Functionと<code><span style="color: #000">bind</span></code>を組み合わせて使用する</a></li> </ul> </li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#limitation>制限</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#frequently-asked-questions>よくある質問と回答</a><ul> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#why-doesnt-this-compile>どうしてコンパイルできない？</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#why-does-this-compile>どうしてコンパイルできちゃう？ エラーになる筈なのに。</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#what-is-the-difference-between-bind-and-bind-r><code><span style="color: #000">bind(f, ...)</span></code> と <code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code> はどう違う？</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#does-bind-work-with-win-api>bind は Windows の API 関数に対して使える？</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#does-bind-work-with-com-methods>bind は COM のメソッドに使える？</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#does-bind-work-with-mac-toolbox>bind は Mac の Toolbox 関数に使える？</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#does-bind-work-with-extern-c-functions>bind は extern "C" な関数に使える？</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#why-doesnt-bind-automatically-recognize-nonstd-functions>どうして bind は非標準の関数を自動的に認識しない？</a></li> </ul> </li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#troubleshooting>トラブルシューティング</a><ul> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#incorrect-number-of-arguments>引数の数が不正</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#function-object-cannot-be-called-with-the-specified-arguments>関数オブジェクトは指定された引数とともに呼び出すことはできない</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#access-arg-does-not-exist>存在しない引数へのアクセス</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#inappropriate-use-of-bind><code><span style="color: #000">bind(f, ...)</span></code> の不適切な使用</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#inappropriate-use-of-bind-r><code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code> の不適切な使用</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#binding-a-nonstd-function>非標準の関数を束縛</a></li> <li><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#const-in-signatures>シグネチャが const を含む</a></li> <li>MSVC specific: using boost::bind;</li> <li>MSVC specific: class templates shadow function templates</li> <li>MSVC specific: ... in signatures treated as type</li> </ul> </li> <li>Interface<ul> <li>Synopsis</li> <li>Common requirements</li> <li>Common definitions</li> <li>bind</li> <li>Additional overloads</li> </ul> </li> <li>Implementation<ul> <li>Files</li> <li>Dependencies</li> <li>Number of Arguments</li> <li>"<strong>stdcall", "</strong>fastcall", and "pascal" Support</li> <li>Using the BOOST_BIND macro</li> <li>visit_each support</li> </ul> </li> <li>Acknowledgements</li> </ul> <h2><a href=http://boostjp.github.io/archive/boost_docs/libs/purpose name=purpose>目的</a></h2> <p><code><span style="color: #000">boost::bind</span></code> は標準ライブラリの関数 <code><span style="color: #000">std::bind1st</span></code> および <code><span style="color: #000">std::bind2nd</span></code> を汎用化したものである。 関数オブジェクトだけでなく、関数や関数へのポインタ、メンバ関数へのポインタをサポートし、任意の引数を特定の値に束縛したり、入力引数を、もとの順番に関係なく自由な位置に移し替えることができる。 <code><span style="color: #000">bind</span></code> が扱うことのできる関数オブジェクトには、特別な条件はない。 特に、標準関数が要求する <code><span style="color: #000">typedef result_type</span></code> や <code><span style="color: #000">first_argument_type</span></code> および <code><span style="color: #000">second_argument_type</span></code> は必須ではない。</p> <ul> <li>【訳注：このような関数を一般に「バインダ」または「束縛子」と呼ぶ。】</li> <li>【訳注：「入力引数」とは、<code><span style="color: #000">bind</span></code> によって生成された関数オブジェクトを呼び出す時に渡される引数。例えば、<code><span style="color: #000">bind(f, _1, 5)(x)</span></code> における <code><span style="color: #000">x</span></code> のこと。】</li> </ul> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/using-bind-with-function-and-function-pointer name=using-bind-with-function-and-function-pointer>関数と関数ポインタに対して<code><span style="color: #000">bind</span></code>を使用する</a></h3> <p>以下の関数が定義されているとき、</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B00040">int</span> <span style="color: #0000FF">f</span>(<span style="color: #B00040">int</span> a, <span style="color: #B00040">int</span> b)
{
    <span style="color: #008000; font-weight: bold">return</span> a <span style="color: #666666">+</span> b;
}

<span style="color: #B00040">int</span> <span style="color: #0000FF">g</span>(<span style="color: #B00040">int</span> a, <span style="color: #B00040">int</span> b, <span style="color: #B00040">int</span> c)
{
    <span style="color: #008000; font-weight: bold">return</span> a <span style="color: #666666">+</span> b <span style="color: #666666">+</span> c;
}
</pre></div> <code><span style="color: #000">bind(f, 1, 2)</span></code> は "nullary" (無項)、つまり引数をとらない関数オブジェクトを生成する。これを評価すると <code><span style="color: #000">f(1, 2)</span></code> を返す。 同様に、<code><span style="color: #000">bind(g, 1, 2, 3)()</span></code> は <code><span style="color: #000">g(1, 2, 3)</span></code> と等価である。</p> <p>【訳注："nullary" は boost の造語のようで、「いくつかの邪悪な提案のうち、いちばんマシ」として選ばれたとの記述が <a href=http://boostjp.github.io/archive/boost_docs/compose/index.html>compose ライブラリのコメント</a> にある。】</p> <p>引数のうちいくつかだけを、選択的に束縛することもできる。 例えば、<code><span style="color: #000">bind(f, _1, 5)(x)</span></code> は <code><span style="color: #000">f(x, 5)</span></code> と等価である。 ここで、<code><span style="color: #000">_1</span></code> は「最初の入力引数によって置き換えられる」ことを意味するプレースホルダである。</p> <p>【訳注：残念ながら、<code><span style="color: #000">bind(f, _1, 5)(10)</span></code> のように、入力引数にリテラルを渡すことはできない。詳しくは、<a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#limitation>制限の項</a> を参照。】</p> <p>比較のため、同じ操作を標準ライブラリのプリミティブを使って書くとこうなる。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%">std<span style="color: #666666">::</span>bind2nd(std<span style="color: #666666">::</span>ptr_fun(f), <span style="color: #666666">5</span>)(x);
</pre></div> <code><span style="color: #000">bind</span></code> は <code><span style="color: #000">std::bind1st</span></code> の機能もカバーしている。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%">std<span style="color: #666666">::</span>bind1st(std<span style="color: #666666">::</span>ptr_fun(f), <span style="color: #666666">5</span>)(x);   <span style="color: #408080; font-style: italic">// f(5, x)</span>
bind(f, <span style="color: #666666">5</span>, _1)(x);                     <span style="color: #408080; font-style: italic">// f(5, x)</span>
</pre></div> <code><span style="color: #000">bind</span></code> は二つ以上の引数を持つ関数を扱うことができる。 また、引数の置き換え機能はより一般化されている。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%">bind(f, _2, _1)(x, y);                 <span style="color: #408080; font-style: italic">// f(y, x)</span>
bind(g, _1, <span style="color: #666666">9</span>, _1)(x);                 <span style="color: #408080; font-style: italic">// g(x, 9, x)</span>
bind(g, _3, _3, _3)(x, y, z);          <span style="color: #408080; font-style: italic">// g(z, z, z)</span>
bind(g, _1, _1, _1)(x, y, z);          <span style="color: #408080; font-style: italic">// g(x, x, x)</span>
</pre></div> 最後の例で、<code><span style="color: #000">bind(g, _1, _1, _1)</span></code> が生成する関数オブジェクトは入力引数を一つしか受け取らないにも関わらず、複数の引数を付けて呼び出せることに注意。 このように、余分な引数は黙って無視され、エラーにはならない。 同様に、三番目の例では最初の引数 <code><span style="color: #000">x</span></code> と二番目の引数 <code><span style="color: #000">y</span></code> は無視される。</p> <p><code><span style="color: #000">bind</span></code> に渡される引数はコピーされ、生成された関数オブジェクトの内部に保持される。 例えば、以下のコードでは、</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B00040">int</span> i <span style="color: #666666">=</span> <span style="color: #666666">5</span>;
bind(f, i, _1);
</pre></div> <code><span style="color: #000">i</span></code> の値のコピーが関数オブジェクトに格納される。 コピーではなく参照を関数オブジェクトに格納したい場合には、<a href=http://boostjp.github.io/archive/boost_docs/libs/bind/ref.html><code><span style="color: #000">boost::ref</span></code></a> および <a href=http://boostjp.github.io/archive/boost_docs/libs/bind/ref.html><code><span style="color: #000">boost::cref</span></code></a> を使う必要がある。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B00040">int</span> i <span style="color: #666666">=</span> <span style="color: #666666">5</span>;
bind(f, ref(i), _1);
</pre></div> 【訳注：詳しくは、<a href=http://boostjp.github.io/archive/boost_docs/libs/bind/ref.html><code><span style="color: #000">ref</span></code> のドキュメント</a>を参照。】</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/using-bind-with-function-object name=using-bind-with-function-object>関数オブジェクトに対して<code><span style="color: #000">bind</span></code>を使用する</a></h3> <p><code><span style="color: #000">bind</span></code> は通常の関数だけでなく、任意の関数オブジェクトを受け付ける。 一般的には（標準 C++ には <code><span style="color: #000">typeof</span></code> 演算子がなく、戻り型を推論できないため）、生成される関数オブジェクトの <code><span style="color: #000">operator()</span></code> の戻り型を以下のように明示的に指定する必要がある。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">struct</span> F
{
    <span style="color: #B00040">int</span> <span style="color: #008000; font-weight: bold">operator</span>()(<span style="color: #B00040">int</span> a, <span style="color: #B00040">int</span> b) { <span style="color: #008000; font-weight: bold">return</span> a <span style="color: #666666">-</span> b; }
    <span style="color: #B00040">bool</span> <span style="color: #008000; font-weight: bold">operator</span>()(<span style="color: #B00040">long</span> a, <span style="color: #B00040">long</span> b) { <span style="color: #008000; font-weight: bold">return</span> a <span style="color: #666666">==</span> b; }
};

F f;

<span style="color: #B00040">int</span> x <span style="color: #666666">=</span> <span style="color: #666666">104</span>;

bind<span style="color: #666666">&lt;</span><span style="color: #B00040">int</span><span style="color: #666666">&gt;</span>(f, _1, _1)(x);        <span style="color: #408080; font-style: italic">// f(x, x) つまり、ゼロ</span>
</pre></div> 関数オブジェクトが <code><span style="color: #000">result_type</span></code> という名前の入れ子の型を開示している場合、戻り型を明示的に書く必要はない。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%">nt x <span style="color: #666666">=</span> <span style="color: #666666">8</span>;

bind(std<span style="color: #666666">::</span>less<span style="color: #666666">&lt;</span><span style="color: #B00040">int</span><span style="color: #666666">&gt;</span>(), _1, <span style="color: #666666">9</span>)(x);   <span style="color: #408080; font-style: italic">// x &lt; 9</span>
</pre></div> 【注意：戻り型を省略する機能は、コンパイラによっては利用できない場合がある。】</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/using-bind-with-pointer-to-member name=using-bind-with-pointer-to-member>メンバへのポインタに対して<code><span style="color: #000">bind</span></code>を使用する</a></h3> <p>メンバ関数へのポインタやデータメンバへのポインタは <code><span style="color: #000">operator()</span></code> を持たないので、関数オブジェクトではない。 しかし、それでは不便なので、<code><span style="color: #000">bind</span></code> は最初の引数としてメンバへのポインタも受け付ける。 この場合、<a href=http://boostjp.github.io/archive/boost_docs/libs/mem_fn.html><code><span style="color: #000">boost::mem_fn</span></code></a> によってメンバへのポインタが関数オブジェクトに変換されて渡されたかのように振る舞う。 すなわち、式</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%">bind(<span style="color: #666666">&amp;</span>X<span style="color: #666666">::</span>f, <i>args</i>)
</pre></div> は以下の式と等価である。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%">bind<span style="color: #666666">&lt;</span>R<span style="color: #666666">&gt;</span>(mem_fn(<span style="color: #666666">&amp;</span>X<span style="color: #666666">::</span>f), <i>args</i>)
</pre></div> ここで、<code><span style="color: #000">R</span></code> は <code><span style="color: #000">X::f</span></code> の戻り型（メンバ関数の場合）、またはメンバの型への <code><span style="color: #000">const</span></code> な参照（データメンバの場合）である。</p> <p>【注意：<code><span style="color: #000">mem_fn</span></code> が生成する関数オブジェクトを呼び出す際には、最初の引数としてオブジェクトのポインタ、参照またはスマートポインタを渡す。 詳しくは、<a href=http://boostjp.github.io/archive/boost_docs/libs/mem_fn.html><code><span style="color: #000">mem_fn</span></code> のドキュメント</a>を参照。】</p> <p>例：</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">struct</span> X
{
    <span style="color: #B00040">bool</span> f(<span style="color: #B00040">int</span> a);
};

X x;

shared_ptr<span style="color: #666666">&lt;</span>X<span style="color: #666666">&gt;</span> p(<span style="color: #008000; font-weight: bold">new</span> X);

<span style="color: #B00040">int</span> i <span style="color: #666666">=</span> <span style="color: #666666">5</span>;

bind(<span style="color: #666666">&amp;</span>X<span style="color: #666666">::</span>f, ref(x), _1)(i);     <span style="color: #408080; font-style: italic">// x.f(i)</span>
bind(<span style="color: #666666">&amp;</span>X<span style="color: #666666">::</span>f, <span style="color: #666666">&amp;</span>x, _1)(i);         <span style="color: #408080; font-style: italic">// (&amp;x)-&gt;f(i)</span>
bind(<span style="color: #666666">&amp;</span>X<span style="color: #666666">::</span>f, x, _1)(i);          <span style="color: #408080; font-style: italic">// (x の内部的なコピー).f(i)</span>
bind(<span style="color: #666666">&amp;</span>X<span style="color: #666666">::</span>f, p, _1)(i);          <span style="color: #408080; font-style: italic">// (p の内部的なコピー)-&gt;f(i)</span>
</pre></div> 最後の二つの例は「自己充足な」関数オブジェクトを生成する興味深い例である。 <code><span style="color: #000">bind(&amp;X::f, x, _1)</span></code> は <code><span style="color: #000">x</span></code> のコピーを保持する。 <code><span style="color: #000">bind(&amp;X::f, p, _1)</span></code> は <code><span style="color: #000">p</span></code> のコピーを保持し、<code><span style="color: #000">p</span></code> が <code><span style="color: #000">boost::shared_ptr</span></code> であるため、関数オブジェクトは <code><span style="color: #000">X</span></code> のインスタンスへの参照を持ち、それは <code><span style="color: #000">p</span></code> のスコープを抜けたり <code><span style="color: #000">reset()</span></code> されたりしても有効である。</p> <p>【訳注：つまり、<code><span style="color: #000">bind</span></code> の最初の引数がメンバ関数へのポインタである場合、次の引数はそのメンバ関数を持つクラスまたは派生クラスのオブジェクトまたはポインタ、<code><span style="color: #000">ref()</span></code>、スマートポインタでなければならない。】</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/using-nested-binds-for-function-composition name=using-nested-binds-for-function-composition>関数合成のために入れ子の<code><span style="color: #000">bind</span></code>を使用する</a></h3> <p><code><span style="color: #000">bind</span></code> に渡される引数のうちいくつかは、それ自体が <code><span style="color: #000">bind</span></code> の入れ子になった式でもよい。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%">bind(f, bind(g, _1))(x);               <span style="color: #408080; font-style: italic">// f(g(x))</span>
</pre></div> <code><span style="color: #000">bind</span></code> によって生成された関数オブジェクトを呼び出す時には、外側の <code><span style="color: #000">bind</span></code> 式が呼ばれる前に内側の <code><span style="color: #000">bind</span></code> 式が、複数ある場合は順不同で評価される。 次に、その結果は外側の <code><span style="color: #000">bind</span></code> が評価される際の引数として渡される。 上の例で、関数オブジェクトが引数リスト <code><span style="color: #000">(x)</span></code> とともに呼び出される場合、<code><span style="color: #000">bind(g, _1)(x)</span></code> がまず評価されて <code><span style="color: #000">g(x)</span></code> となり、次に <code><span style="color: #000">bind(f, g(x))(x)</span></code> が評価され、最終的な結果は <code><span style="color: #000">f(g(x))</span></code> となる。</p> <p><code><span style="color: #000">bind</span></code> のこの機能は、関数を合成するために使用することができる。 詳しくは、<a href=http://boostjp.github.io/archive/boost_docs/libs/bind/bind_as_compose.cpp.html><code><span style="color: #000">bind_as_compose.cpp</span></code></a> に <code><span style="color: #000">bind</span></code> を使って <a href=http://boostjp.github.io/archive/boost_docs/compose/index.html>Boost.Compose</a> と同様の効果を得るサンプルがあるので、それを参照のこと。</p> <p>ただし、（<code><span style="color: #000">bind</span></code> 関数の）最初の引数、つまり束縛される関数オブジェクトは、評価されないので注意すること。 特に、関数オブジェクトが <code><span style="color: #000">bind</span></code> で生成されたものや、プレースホルダ引数の場合でも評価されないので、次の例は期待通りには動かない。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">typedef</span> <span style="color: #0000FF">void</span> (<span style="color: #666666">*</span>pf)(<span style="color: #B00040">int</span>);

std<span style="color: #666666">::</span>vector<span style="color: #666666">&lt;</span>pf<span style="color: #666666">&gt;</span> v;

std<span style="color: #666666">::</span>for_each(v.begin(), v.end(), bind(_1, <span style="color: #666666">5</span>));
</pre></div> 【訳注：動かないというか、コンパイルできない。】</p> <p>期待通りの結果を得るには、ヘルパ関数オブジェクト <code><span style="color: #000">apply</span></code> を使用する必要がある。 <code><span style="color: #000">apply</span></code> はその最初の引数である関数オブジェクトを、残りの引数リストに対して適用する。 <code><span style="color: #000">apply</span></code> 関数は <code><span style="color: #000">boost/bind/apply.hpp</span></code> ヘッダファイルに定義されている。 上の例は、この <code><span style="color: #000">apply</span></code> を使って次のように書き直せばよい。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">typedef</span> <span style="color: #0000FF">void</span> (<span style="color: #666666">*</span>pf)(<span style="color: #B00040">int</span>);

std<span style="color: #666666">::</span>vector<span style="color: #666666">&lt;</span>pf<span style="color: #666666">&gt;</span> v;

std<span style="color: #666666">::</span>for_each(v.begin(), v.end(), bind(apply<span style="color: #666666">&lt;</span><span style="color: #B00040">void</span><span style="color: #666666">&gt;</span>(), _1, <span style="color: #666666">5</span>));
</pre></div> 時には、最初の引数だけでなく、入れ子になった <code><span style="color: #000">bind</span></code> 部分式であるような他の引数を評価したくない場合もある。 この場合は、別のヘルパ関数 <code><span style="color: #000">protect</span></code> を使用するとよい。 これにより、引数の型がマスクされ、<code><span style="color: #000">bind</span></code> が認識されず、評価されない。 呼び出し時には、<code><span style="color: #000">protect</span></code> は単純に引数リストを他の関数オブジェクトのそのまま渡す。</p> <p><code><span style="color: #000">protect</span></code> 関数は <code><span style="color: #000">boost/bind/protect.hpp</span></code> ヘッダに含まれている。 <code><span style="color: #000">bind</span></code> 関数オブジェクトを評価されないように保護するには、<code><span style="color: #000">protect(bind(f, ...))</span></code> と書けばよい。</p> <h2><a href=http://boostjp.github.io/archive/boost_docs/libs/examples name=examples>コード例</a></h2> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/using-bind-with-standard-algorithms name=using-bind-with-standard-algorithms>標準アルゴリズムと<code><span style="color: #000">bind</span></code>を組み合わせて使用する</a></h3> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">image</span>;

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">animation</span>
{
<span style="color: #A0A000">public:</span>

    <span style="color: #B00040">void</span> advance(<span style="color: #B00040">int</span> ms);
    <span style="color: #B00040">bool</span> inactive() <span style="color: #008000; font-weight: bold">const</span>;
    <span style="color: #B00040">void</span> render(image <span style="color: #666666">&amp;</span> target) <span style="color: #008000; font-weight: bold">const</span>;
};

std<span style="color: #666666">::</span>vector<span style="color: #666666">&lt;</span>animation<span style="color: #666666">&gt;</span> anims;

<span style="color: #008000; font-weight: bold">template</span><span style="color: #666666">&lt;</span><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">C</span>, <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">P</span><span style="color: #666666">&gt;</span> <span style="color: #B00040">void</span> erase_if(C <span style="color: #666666">&amp;</span> c, P pred)
{
    c.erase(std<span style="color: #666666">::</span>remove_if(c.begin(), c.end(), pred), c.end());
}

<span style="color: #B00040">void</span> update(<span style="color: #B00040">int</span> ms)
{
    std<span style="color: #666666">::</span>for_each(anims.begin(), anims.end(), boost<span style="color: #666666">::</span>bind(<span style="color: #666666">&amp;</span>animation<span style="color: #666666">::</span>advance, _1, ms));
    erase_if(anims, boost<span style="color: #666666">::</span>mem_fn(<span style="color: #666666">&amp;</span>animation<span style="color: #666666">::</span>inactive));
}

<span style="color: #B00040">void</span> render(image <span style="color: #666666">&amp;</span> target)
{
    std<span style="color: #666666">::</span>for_each(anims.begin(), anims.end(), boost<span style="color: #666666">::</span>bind(<span style="color: #666666">&amp;</span>animation<span style="color: #666666">::</span>render, _1, boost<span style="color: #666666">::</span>ref(target)));
}
</pre></div> </p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/using-bind-with-boost-function name=using-bind-with-boost-function>Boost.Functionと<code><span style="color: #000">bind</span></code>を組み合わせて使用する</a></h3> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">button</span>
{
<span style="color: #A0A000">public:</span>

    boost<span style="color: #666666">::</span>function<span style="color: #666666">&lt;</span><span style="color: #B00040">void</span><span style="color: #666666">&gt;</span> onClick;
};

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">player</span>
{
<span style="color: #A0A000">public:</span>

    <span style="color: #B00040">void</span> play();
    <span style="color: #B00040">void</span> <span style="color: #0000FF">stop</span>();
};

button playButton, stopButton;
player thePlayer;

<span style="color: #B00040">void</span> <span style="color: #0000FF">connect</span>()
{
    playButton.onClick <span style="color: #666666">=</span> boost<span style="color: #666666">::</span>bind(<span style="color: #666666">&amp;</span>player<span style="color: #666666">::</span>play, <span style="color: #666666">&amp;</span>thePlayer);
    stopButton.onClick <span style="color: #666666">=</span> boost<span style="color: #666666">::</span>bind(<span style="color: #666666">&amp;</span>player<span style="color: #666666">::</span>stop, <span style="color: #666666">&amp;</span>thePlayer);
}
</pre></div> </p> <h2><a href=http://boostjp.github.io/archive/boost_docs/libs/limitation name=limitation>制限</a></h2> <p><code><span style="color: #000">bind</span></code> が生成する関数オブジェクトは、引数を参照渡しで受け取る。このため、<code><span style="color: #000">const</span></code> でない一時オブジェクトやリテラル定数を受け取ることはできない。 これは、C++ 言語自体の制約であり、「転送する関数の問題（？）」として知られている。</p> <p>任意の型の引数を受け取り、それらをそのまま渡すために、<code><span style="color: #000">bind</span></code> ライブラリでは、</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">template</span><span style="color: #666666">&lt;</span><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">T</span><span style="color: #666666">&gt;</span> <span style="color: #B00040">void</span> f(T <span style="color: #666666">&amp;</span> t);
</pre></div> という形式のシグネチャを（訳注：仮引数に）使っている。 上記のように、この方法は <code><span style="color: #000">const</span></code> でない右辺値には使えない。</p> <p>この問題に対して、次のようにオーバーロードを追加する「解決策」がよく提案される。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">template</span><span style="color: #666666">&lt;</span><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">T</span><span style="color: #666666">&gt;</span> <span style="color: #B00040">void</span> f(T <span style="color: #666666">&amp;</span> t);
<span style="color: #008000; font-weight: bold">template</span><span style="color: #666666">&lt;</span><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">T</span><span style="color: #666666">&gt;</span> <span style="color: #B00040">void</span> f(T <span style="color: #008000; font-weight: bold">const</span> <span style="color: #666666">&amp;</span> t);
</pre></div> 残念ながら、この方法は (a) 引数が 9 つある場合、512 ものオーバーロードを提供する必要があり、(b) 引数が <code><span style="color: #000">const</span></code> である場合、シグネチャが全く同じであるために半順序（？）を定義できず、左辺値にも右辺値にもうまく働かない。</p> <p>【注意：これは C++ 言語の暗い隅（？）であり、該当する問題はまだ解決されていない。】</p> <h2><a href=http://boostjp.github.io/archive/boost_docs/libs/frequently-asked-questions name=frequently-asked-questions>よくある質問と回答</a></h2> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/why-doesnt-this-compile name=why-doesnt-this-compile>どうしてコンパイルできない？</a></h3> <p><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#troubleshooting>トラブルシューティング</a> の項を参照。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/why-does-this-compile name=why-does-this-compile>どうしてコンパイルできちゃう？ エラーになる筈なのに。</a></h3> <p>おそらく、<code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code> という汎用の構文を使っているためであろう。この書き方は、<code><span style="color: #000">bind</span></code> に対して <code><span style="color: #000">f</span></code> の引数の数や戻り型に関するエラーチェックをしないように指示するものである。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/what-is-the-difference-between-bind-and-bind-r name=what-is-the-difference-between-bind-and-bind-r><code><span style="color: #000">bind(f, ...)</span></code> と <code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code> はどう違う？</a></h3> <p>最初の形式は <code><span style="color: #000">bind</span></code> に <code><span style="color: #000">f</span></code> の型を調べて、引数の数や戻り型を解決するように指示する。 引数の数の間違いは「バインド時」に検出される。 この構文はもちろん、<code><span style="color: #000">f</span></code> に対していくつかのことを要求する。 つまり、<code><span style="color: #000">f</span></code> は関数、関数ポインタ、メンバ関数へのポインタのいずれかであるか、関数オブジェクトの場合には <code><span style="color: #000">result_type</span></code> という入れ子の型を定義する必要がある。簡単に言えば、<code><span style="color: #000">bind</span></code> が認識できるものでなければならない。</p> <p>二番目の形式は <code><span style="color: #000">bind</span></code> に <code><span style="color: #000">f</span></code> の型を識別しないように指示する。 これは一般的には、<code><span style="color: #000">result_type</span></code> を開示しない、あるいはできない関数オブジェクトとともに用いられるが、その他に非標準の関数に対しても用いることができる。 たとえば、現在の実装は <code><span style="color: #000">printf</span></code> のような可変引数の関数を自動的に認識しないため、<code><span style="color: #000">bind&lt;int&gt;(printf, ...)</span></code> と書く必要がある。</p> <p>【訳注：「非標準」は原文では nonstandard だが、printf が「非標準」というのは変だなぁ。】</p> <p>他に考慮すべき重要な点として、コンパイラがテンプレートの部分特殊化版や関数テンプレートの半順序（？）に対応していない場合、<code><span style="color: #000">f</span></code> が関数オブジェクトであれば最初の形式は扱えず、また、<code><span style="color: #000">f</span></code> が関数（ポインタ）やメンバ関数へのポインタであれば二番目の形式は扱えないことが多い。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/does-bind-work-with-win-api name=does-bind-work-with-win-api>bind は Windows の API 関数に対して使える？</a></h3> <p>はい、<code><span style="color: #000">#define BOOST_BIND_ENABLE_STDCALL</span></code> すれば。 または、目的の関数を <a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-bind-with-function-object>generic function object</a> として扱って、<code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code> の構文を使っても良い。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/does-bind-work-with-com-methods name=does-bind-work-with-com-methods>bind は COM のメソッドに使える？</a></h3> <p>はい、<code><span style="color: #000">#define BOOST_MEM_FN_ENABLE_STDCALL</span></code> すれば。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/does-bind-work-with-mac-toolbox name=does-bind-work-with-mac-toolbox>bind は Mac の Toolbox 関数に使える？</a></h3> <p>はい、<code><span style="color: #000">#define BOOST_BIND_ENABLE_PASCAL</span></code> すれば。 または、目的の関数を <a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-bind-with-function-object>generic function object</a> として扱って、<code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code> の構文を使っても良い。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/does-bind-work-with-extern-c-functions name=does-bind-work-with-extern-c-functions>bind は extern "C" な関数に使える？</a></h3> <p>場合による。 いくつかのプラットフォームでは、<code><span style="color: #000">extern "C"</span></code> な関数へのポインタは「通常の」関数ポインタと等価であり、問題なく動く。 他のプラットフォームでは、それらは別物として扱われる。 プラットフォーム固有の <code><span style="color: #000">bind</span></code> の実装があれば、問題を透過的に解決できることが期待されるが、この実装はそうなっていない。 いつものように、回避策は目的の関数を <a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#using-bind-with-function-object>generic function object</a> として扱って、<code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code> の構文を使うことである。</p> <p>【訳注：「この実装」とあるが、このドキュメントは <code><span style="color: #000">bind</span></code> の仕様を定義するもので、附属の実装は「サンプル実装」という位置付けで書かれているものと思われる。（？）】</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/why-doesnt-bind-automatically-recognize-nonstd-functions name=why-doesnt-bind-automatically-recognize-nonstd-functions>どうして bind は非標準の関数を自動的に認識しない？</a></h3> <p>特定のベンダに縛られることを防ぐために、非標準の拡張は一般的にデフォルトでオフにすべきである。 もしも<a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html##does-bind-work-with-win-api>固有のマクロ</a>が自動的に定義されたら、そのつもりがないのにそれらの機能を使ってしまい、知らない間に互換性を損なってしまう危険性がある。 また、いくつかのコンパイラは <code><span style="color: #000">__stdcall (__fastcall)</span></code> をデフォルトの呼び出し規約とするオプションを用意しており、特別なサポートは必要ない。</p> <h2><a href=http://boostjp.github.io/archive/boost_docs/libs/troubleshooting name=troubleshooting>トラブルシューティング</a></h2> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/incorrect-number-of-arguments name=incorrect-number-of-arguments>引数の数が不正(Incorrect number of arguments)</a></h3> <p>式 <code><span style="color: #000">bind(f, a1, a2, ..., aN)</span></code> において、関数オブジェクト <code><span style="color: #000">f</span></code> はちょうど <code><span style="color: #000">N</span></code> 個の引数を取らなければならない。 このエラーは、通常「バインド時」に検出される。すなわち、<code><span style="color: #000">bind()</span></code> を呼び出している行に対してコンパイルエラーが報告される。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B00040">int</span> <span style="color: #0000FF">f</span>(<span style="color: #B00040">int</span>, <span style="color: #B00040">int</span>);

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>()
{
    boost<span style="color: #666666">::</span>bind(f, <span style="color: #666666">1</span>);    <span style="color: #408080; font-style: italic">// エラー、f は二つの引数を取る</span>
    boost<span style="color: #666666">::</span>bind(f, <span style="color: #666666">1</span>, <span style="color: #666666">2</span>); <span style="color: #408080; font-style: italic">// OK</span>
}
</pre></div> このエラーの変種として、メンバ関数に対する暗黙の「<code><span style="color: #000">this</span></code>」引数を忘れることも多い。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">struct</span> X
{
    <span style="color: #B00040">int</span> f(<span style="color: #B00040">int</span>);
};

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>()
{
    boost<span style="color: #666666">::</span>bind(<span style="color: #666666">&amp;</span>X<span style="color: #666666">::</span>f, <span style="color: #666666">1</span>);     <span style="color: #408080; font-style: italic">// エラー、X::f は二つの引数を取る</span>
    boost<span style="color: #666666">::</span>bind(<span style="color: #666666">&amp;</span>X<span style="color: #666666">::</span>f, _1, <span style="color: #666666">1</span>); <span style="color: #408080; font-style: italic">// OK</span>
}
</pre></div> 【訳注：<code><span style="color: #000">bind</span></code> では、メンバ関数へのポインタは、通常の引数の前に暗黙の「<code><span style="color: #000">this</span></code>」引数をとるものとみなす。】</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/function-object-cannot-be-called-with-the-specified-arguments name=function-object-cannot-be-called-with-the-specified-arguments>関数オブジェクトは指定された引数とともに呼び出すことはできない(The function object cannot be called with the specified arguments)</a></h3> <p>通常の関数呼び出しと同様、束縛される関数オブジェクトは引数リストと互換性を持つ必要がある。 非互換性は、通常コンパイラによって「呼び出し時」に検出され、<code><span style="color: #000">bind.hpp</span></code> の次のような行に対するエラーとなる。</p> <p><pre><code><span style="color: #000">    return f(a[a1_], a[a2_]);
</span></code></pre> An example of this kind of error:</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B00040">int</span> <span style="color: #0000FF">f</span>(<span style="color: #B00040">int</span>);

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>()
{
    boost<span style="color: #666666">::</span>bind(f, <span style="color: #BA2121">"incompatible"</span>);      <span style="color: #408080; font-style: italic">// OK、呼び出さないので</span>
    boost<span style="color: #666666">::</span>bind(f, <span style="color: #BA2121">"incompatible"</span>)();    <span style="color: #408080; font-style: italic">// エラー、"incompatible" は int ではない</span>
    boost<span style="color: #666666">::</span>bind(f, _1);                  <span style="color: #408080; font-style: italic">// OK</span>
    boost<span style="color: #666666">::</span>bind(f, _1)(<span style="color: #BA2121">"incompatible"</span>);  <span style="color: #408080; font-style: italic">// エラー、"incompatible" は int ではない</span>
}
</pre></div> </p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/access-arg-does-not-exist name=access-arg-does-not-exist>存在しない引数へのアクセス(Accessing an argument that does not exist)</a></h3> <p>プレースホルダ <code><span style="color: #000">_N</span></code> は引数リストの <code><span style="color: #000">N</span></code> 番目の引数を、「呼び出し時」に選択する。 当然、引数リストの範囲外のものにアクセスしようとすればエラーになる。</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B00040">int</span> <span style="color: #0000FF">f</span>(<span style="color: #B00040">int</span>);

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>()
{
    boost<span style="color: #666666">::</span>bind(f, _1);                  <span style="color: #408080; font-style: italic">// OK</span>
    boost<span style="color: #666666">::</span>bind(f, _1)();                <span style="color: #408080; font-style: italic">// エラー、一番目の引数は存在しない</span>
}
</pre></div> このエラーは、通常 <code><span style="color: #000">bind.hpp</span></code> の次のような行に対して報告される。</p> <p><pre><code><span style="color: #000">    return f(a[a1_]);
</span></code></pre> <code><span style="color: #000">std::bind1st(f, a)</span></code> の代わりに使う場合、<code><span style="color: #000">bind(f, a, _1)</span></code> ではなく間違って <code><span style="color: #000">bind(f, a, _2)</span></code> としてしまうことも多い。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/inappropriate-use-of-bind name=inappropriate-use-of-bind><code><span style="color: #000">bind(f, ...)</span></code> の不適切な使用(Inappropriate use of <code><span style="color: #000">bind(f, ...)</span></code>)</a></h3> <p><code><span style="color: #000">bind(f, a1, a2, ..., aN)</span></code> の<a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#what-is-the-difference-between-bind-and-bind-r>形式</a>は <code><span style="color: #000">f</span></code> を自動的に認識させる。 これは、任意の関数オブジェクトに対して働くわけではない。<code><span style="color: #000">f</span></code> は関数またはメンバ関数へのポインタでなければならない。</p> <p>この形式を <code><span style="color: #000">result_type</span></code> を定義する関数オブジェクトに使えるのは、部分特殊化版や半順序（？）をサポートしているコンパイラに限られる。 特に、MSVC のバージョン 7.0 までは、関数オブジェクトに対するこの構文はサポートしない。</p> <p>【訳注：原文では MSVC up to version 7.0 となっているが、これは 7.0 を含むのだろうか？】</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/inappropriate-use-of-bind-r name=inappropriate-use-of-bind-r><code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code> の不適切な使用(Inappropriate use of <code><span style="color: #000">bind&lt;R&gt;(f, ...)</span></code>)</a></h3> <p><code><span style="color: #000">bind&lt;R&gt;(f, a1, a2, ..., aN)</span></code>の<a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#what-is-the-difference-between-bind-and-bind-r>形式</a>は、任意の関数オブジェクトをサポートする。</p> <p>この形式を、(推奨はしないが)関数もしくメンバ関数ポインタに使えるのは、半順序をサポートしているコンパイラに限られる。特に、MSVC のバージョン 7.0 までは、関数とメンバ関数ポインタに対するこの構文はサポートしない。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/binding-a-nonstd-function name=binding-a-nonstd-function>非標準の関数を束縛(Binding a nonstandard function)</a></h3> <p>デフォルトでは、<code><span style="color: #000">bind(f, a1, a2, ..., aN)</span></code> の<a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#what-is-the-difference-between-bind-and-bind>形式</a>は、「通常」のC++関数と関数ポインタのみを受け入れる。<a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#does-bind-work-with-win-api>関数が異なる呼び出し規約を使っていたり</a>、<code><span style="color: #000">std::printf</span></code>のような可変引数の関数では、動作しない。汎用的な<code><span style="color: #000">bind&lt;R&gt;(f, a1, a2, ..., aN)</span></code><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#what-is-the-difference-between-bind-and-bind-r>形式</a>なら、そのような非標準関数に対しても動作する。</p> <p>いくつかのプラットフォームでは、<code><span style="color: #000">extern "C"</span></code>の付いた<code><span style="color: #000">stdcmp</span></code>のような関数は、短い形式の<code><span style="color: #000">bind</span></code>では動作しない。</p> <p><a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#does-bind-work-with-win-api>"<code><span style="color: #000">__stdcall</span></code>"</a>や<a href=http://boostjp.github.io/archive/boost_docs/libs/bind.html#does-bind-work-with-mac-toolbox>"<code><span style="color: #000">pascal</span></code>"</a>のサポートを参照。</p> <h3><a href=http://boostjp.github.io/archive/boost_docs/libs/const-in-signatures name=const-in-signatures>シグネチャが const を含む(const in signatures)</a></h3> <p>MSVC 6.0やBorland C++ 5.5.1を含むいくつかのプラットフォームでは、関数のシグニチャがトップレベルの<code><span style="color: #000">const</span></code>を持っていることが問題になる：</p> <p><div class=codehilite style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B00040">int</span> <span style="color: #0000FF">f</span>(<span style="color: #B00040">int</span> <span style="color: #008000; font-weight: bold">const</span>);

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>()
{
    boost<span style="color: #666666">::</span>bind(f, <span style="color: #666666">1</span>);     <span style="color: #408080; font-style: italic">// エラー</span>
}
</pre></div> 回避策は、引数の形式から<code><span style="color: #000">const</span></code>修飾を削除することだ。</p> <hr> <p>以下、未翻訳。</p> <hr> <p>Copyright © 2001, 2002 by Peter Dimov and Multi Media Ltd. Permission to copy, use, modify, sell and distribute this document is granted provided this copyright notice appears in all copies. This document is provided "as is" without express or implied warranty, and with no claim as to its suitability for any purpose.</p> </div> </div> </div> </div> </main> </body> <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.  chromium.org/developers/how-tos/chrome-frame-getting-started --> <!--[if lt IE 7 ]>
        <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
        <script>
            window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})
        </script>
    <![endif]--> </html>